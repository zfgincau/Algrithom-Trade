# MT-v6.141fix3 功能说明

## 新增功能：图表右边显示未来24小时交易事件

### 功能描述
在图表上实时显示未来24小时将要执行的交易事件，显示在现有显示内容的右边，形成左右分栏显示效果。

### 显示内容
右边面板将显示以下交易事件：

1. **每日休眠事件**
   - `04:40 每日收盘前20分钟休眠`
   - `06:10 每日开盘后10分钟休眠结束`

2. **市场盘切换事件**
   - `07:45 亚洲盘开盘前15分钟休眠`
   - `14:45 欧洲盘开盘前15分钟休眠`
   - `20:15 美国盘开盘前15分钟休眠`

3. **周五收盘事件**
   - `22:00 周五收盘休眠`

### 显示效果
```
=== 高级马丁 v6.141fix3 ===    --- 📅 未来24小时交易事件 ---
价格: 2650.50 | 状态: 运行      04:40 每日收盘前20分钟休眠
模式: 逆势对冲 | 建议: 观望      06:10 每日开盘后10分钟休眠结束
多: 0 | 空: 0 | 共: 0          07:45 亚洲盘开盘前15分钟休眠
盈利: $0.00 (0.000%)          14:45 欧洲盘开盘前15分钟休眠
目标: 24.48% | 间隔: 100点     20:15 美国盘开盘前15分钟休眠
--- 多维度评分 ---             22:00 周五收盘休眠
趋势: 0.00 | ML: 0.00 | 流: 0.00 | SR: 0.00
--- 统计 ---
轮数: 0 | 盈利轮: 0
胜率: 0.0% | 累计: $0.00
--- ✓ 交易状态 ---
正常交易中
当前: 05:54 (美洲盘)
盘次: 美洲盘 → 亚洲盘 (2时6分后)
```

### 技术实现

#### 1. 新增全局变量
```cpp
string next24hEvents = "";       // 未来24小时交易事件
```

#### 2. 新增计算函数
```cpp
void CalculateNext24hEvents()
{
   // 计算未来24小时内的所有交易事件
   // 包括每日休眠、市场盘切换、周五收盘等
}
```

#### 3. 修改显示逻辑
```cpp
// 创建左右分栏显示
string leftPanel = displayText;   // 左边：原有显示内容
string rightPanel = "";           // 右边：24小时交易事件

// 右边显示24小时交易事件
if(next24hEvents != "")
{
   rightPanel += "--- 📅 未来24小时交易事件 ---\n";
   rightPanel += next24hEvents;
}

// 创建分栏显示
string combinedDisplay = "";
for(int i = 0; i < maxLines; i++)
{
   string leftLine = leftLinesArray[i];
   string rightLine = rightLinesArray[i];
   
   // 计算右边面板的起始位置
   int rightStart = 50;  // 右边面板起始列
   string paddedLeft = leftLine;
   while(StringLen(paddedLeft) < rightStart)
   {
      paddedLeft += " ";
   }
   
   combinedDisplay += paddedLeft + rightLine + "\n";
}
```

### 更新频率
- 每30秒更新一次24小时事件
- 实时计算未来24小时内的所有交易事件
- 最多显示10个事件，避免显示过多内容

### 使用说明

1. **启动EA后**：图表上会立即显示未来24小时交易事件
2. **实时更新**：事件列表会随着时间推移自动更新
3. **事件提醒**：可以提前了解何时会进入休眠状态
4. **交易规划**：帮助制定交易计划，避免在休眠时间开新单

### 注意事项

1. **显示位置**：事件显示在图表右边，不会影响左侧的主要信息
2. **更新频率**：每30秒更新一次，确保信息及时性
3. **事件数量**：最多显示10个事件，避免信息过载
4. **时间精度**：事件时间精确到分钟，便于提前准备

### 兼容性

- ✅ 完全兼容原版显示内容
- ✅ 不影响现有功能
- ✅ 可选择性显示（如果没有事件则不显示右边面板）
- ✅ 自适应屏幕大小

---

**功能完成时间**: 2025年10月22日  
**版本**: v6.141fix3  
**开发者**: AI Assistant





